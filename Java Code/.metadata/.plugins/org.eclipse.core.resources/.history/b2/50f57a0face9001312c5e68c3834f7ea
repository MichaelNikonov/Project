package server.main;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Date;

import javax.imageio.ImageIO;
import javax.swing.JFrame;

import server.database.Database;
import server.gui.JImageBox;
import sgi.entities.*;


public class ServerMain {

	/**
	 * @param args
	 */
	public static void main(String[] args) {
		Database db = new Database("localhost","sgi","root","root");
		JFrame temp = new JFrame("TEST");
		BufferedImage ol = null;
		try {
			ol = ImageIO.read(new File("layers\\1.png"));
		} catch (IOException e) {
			// TODO Auto-generated catch block
			System.out.println("AAAAAAAAAAAA");
			e.printStackTrace();
		}
		/*
		ArrayList<User> users = db.getUsers();
		if (users!=null) {
			System.out.println("User 1: " + users.get(0).getUsername());
			if (db.setUserOnline(users.get(0),"127.0.0.1")==1)
				System.out.println("User 1 is online");
			else
				if (db.setUserOnline(users.get(0),"127.0.0.1")==2) {
					System.out.println("User 1 already online!");
					if (db.setUserOffline(users.get(0)))
						System.out.println("User is now offline!");
					else
						System.out.println("Error logging off the user!");
				}
				else
					System.out.println("Error logging in the user!");
		}
		else
			System.out.println("No Permissions in the system!");
		
		ArrayList<User> users = db.getUnusedLoggedUsers(15);
		if (users==null) System.out.println("no users!"); else
		System.out.println(users.size());
		if (db.removeUnusedLoggedUsers(15)) System.out.println("All 15 min users logged off");
		*/
		ArrayList<SGIImage> images = db.getImages();
		if (images==null)
			System.out.println("\"no images!\"");
		else {
			SGIImage i = images.get(1);
			i.setImage("images\\1_2014_01_01_00_00_00.jpg");
			System.out.println("Image loaded:");
			System.out.println("1_2014_01_01_00_00_00.jpg");
			JImageBox t = new JImageBox(i.getImage());
			t.addOverlay(ol);
			temp.add(t);
			t.setStretch(true);
			temp.pack();
			temp.setVisible(true);
		}
	}

}
